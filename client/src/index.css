@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * { box-sizing: border-box; }
  body {
    @apply font-sans bg-gray-50 dark:bg-dark-900 text-gray-900 dark:text-gray-100;
    margin: 0;
    padding: 0;
    height: 100vh;
    overflow: hidden;
  }
  #root { height: 100vh; display: flex; flex-direction: column; }
}

@layer components {
  .btn-primary {
    @apply bg-primary-500 hover:bg-primary-600 text-white font-semibold py-2.5 px-4 rounded-xl transition-all duration-200 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed;
  }
  .btn-ghost {
    @apply hover:bg-gray-100 dark:hover:bg-dark-700 text-gray-600 dark:text-gray-300 font-medium py-2 px-3 rounded-xl transition-all duration-200;
  }
  .input-field {
    @apply w-full bg-gray-100 dark:bg-dark-700 border border-transparent focus:border-primary-500 focus:bg-white dark:focus:bg-dark-600 rounded-xl px-4 py-3 text-sm outline-none transition-all duration-200 placeholder-gray-400 dark:placeholder-gray-500;
  }
  .card {
    @apply bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-gray-100 dark:border-dark-700;
  }
  .message-sent {
    @apply bg-primary-500 text-white rounded-2xl rounded-tr-sm px-4 py-2 max-w-xs lg:max-w-md break-words;
  }
  .message-received {
    @apply bg-white dark:bg-dark-700 text-gray-900 dark:text-gray-100 rounded-2xl rounded-tl-sm px-4 py-2 max-w-xs lg:max-w-md break-words shadow-sm;
  }
  .sidebar-item {
    @apply flex items-center gap-3 px-4 py-3 hover:bg-gray-50 dark:hover:bg-dark-700 cursor-pointer transition-colors duration-150 border-b border-gray-50 dark:border-dark-700;
  }
  .sidebar-item.active {
    @apply bg-primary-50 dark:bg-dark-700 border-l-4 border-l-primary-500;
  }
  .avatar {
    @apply rounded-full object-cover flex-shrink-0 bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white font-semibold;
  }
  .online-dot {
    @apply w-3 h-3 bg-primary-500 rounded-full border-2 border-white dark:border-dark-800 absolute bottom-0 right-0;
  }
  .typing-dot {
    @apply w-2 h-2 bg-gray-400 rounded-full animate-pulse-dot;
  }
  .dropdown-menu {
    @apply absolute right-0 top-full mt-1 bg-white dark:bg-dark-700 rounded-xl shadow-xl border border-gray-100 dark:border-dark-600 py-1 z-50 min-w-[180px] animate-fade-in;
  }
  .dropdown-item {
    @apply flex items-center gap-3 px-4 py-2.5 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-dark-600 cursor-pointer transition-colors;
  }
  .dropdown-item.danger {
    @apply text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20;
  }
}

/* Scrollbar */
::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { @apply bg-gray-300 dark:bg-dark-600 rounded-full; }

/* Message animations */
.message-enter { animation: slideUp 0.2s ease-out; }

/* Emoji picker dark mode */
.dark .EmojiPickerReact {
  --epr-bg-color: #1f2937;
  --epr-category-label-bg-color: #1f2937;
  --epr-hover-bg-color: #374151;
  --epr-search-input-bg-color: #374151;
  --epr-text-color: #f9fafb;
  --epr-search-border-color: #4b5563;
}
